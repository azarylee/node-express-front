webpackJsonp([2],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},a,!1,function(e){n("gsu9")},null,null).exports,r=n("/ocq");n("gORT"),n("xJsL");o.default.use(r.a);var l=new r.a({routes:[{path:"/",name:"HelloWorld",component:function(){return new Promise(function(e){e()}).then(n.bind(null,"gORT"))}},{path:"/me",name:"me",component:function(){return n.e(0).then(n.bind(null,"Dnmp"))}},{path:"/login",name:"Login",component:function(){return new Promise(function(e){e()}).then(n.bind(null,"xJsL"))}}]}),i=n("zL8q"),c=n.n(i),u=n("NYxO"),p=n("mvHQ"),d=n.n(p),m=n("//Fk"),f=n.n(m),g=n("mtWM"),h=n.n(g),v=h.a.create({baseURL:"http://127.0.0.1:3000/",timeout:1e5,headers:{Accept:"application/json"},withCredentials:!0}),w=[],b=h.a.CancelToken;v.interceptors.request.use(function(e){return function(e){for(var t in w)w[t].u===e.url+"&"+e.method&&w[t].u!=="/api/whitelists&"+e.method&&(w[t].f(),w.splice(t,1))}(e),e.cancelToken=new b(function(t){w.push({u:e.url+"&"+e.method,f:t})}),L.getters.token&&(e.headers["Admin-Token"]=getToken()),e},function(e){console.log(e),response.data||reject(e),f.a.reject(e)}),v.interceptors.response.use(function(e){return console.log("response"),console.log(e.data),e},function(e){return console.log("error:"),console.log(e),console.log(e.response),f.a.reject(e.response)});var _=v;var y={state:{},mutations:{},actions:{GetList:function(e){e.commit,e.state;return new f.a(function(e,t){_({url:"/api/getnews",method:"get"}).then(function(t){e(t)}).catch(function(e){t(e)})})},GetGameList:function(e){e.commit,e.state;return new f.a(function(e,t){_({url:"/api/getgamelist",method:"get"}).then(function(t){e(t)}).catch(function(e){t(e)})})},LoginByUsername:function(e,t){e.commit;var n=t.username.trim();return localStorage.setItem("username",n),localStorage.setItem("password",t.password),new f.a(function(e,o){(function(e,t){return _({url:"/api/login",method:"post",data:{username:e,password:t}})})(n,t.password).then(function(t){console.log(t);var n=t.data;e(n)}).catch(function(e){o(e)})})},getMe:function(e){e.commit,e.state;return new f.a(function(e,t){_({url:"/api/me",method:"post"}).then(function(n){var o=n.data.data.user;o.role&&null!=o.role?localStorage.setItem("permissions",d()(o.permissions)):t("getInfo: roles must be a non-null array !"),e(n)}).catch(function(e){t(e)})})}}},k={};o.default.use(u.a);var L=new u.a.Store({modules:{app:y},getters:k});o.default.config.productionTip=!1,o.default.use(c.a),new o.default({el:"#app",router:l,store:L,components:{App:s},render:function(e){return e(s)}})},UXPf:function(e,t){},gORT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App",tableData:[],tableData2:[]}},mounted:function(){var e=this;console.log("mounted"),this.$store.dispatch("GetList").then(function(t){e.tableData=t.data}).catch(function(e){console.log(e)}),this.$store.dispatch("GetGameList").then(function(t){console.log(t),e.tableData2=t.data.result,console.log(e.tableData2)}).catch(function(e){console.log(e)})}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h2",[e._v("News List")]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{prop:"newsid",label:"日期",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"newstitle",label:"姓名",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"newsimg",label:"地址"}})],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2}},[n("el-table-column",{attrs:{prop:"bg_pic",label:"图片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("div",[n("img",{attrs:{src:e.row.bg_pic,alt:"pic"}})])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"comment",label:"留言",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"content",label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.content,function(t,o){return n("div",{key:o},[n("h3",[e._v(e._s(t.album_title))]),e._v(" "),n("h4",[e._v(e._s(t.author))])])})}}])})],1)],1)},staticRenderFns:[]};var s=n("VU/8")(o,a,!1,function(e){n("UXPf")},"data-v-010d98d0",null);t.default=s.exports},gsu9:function(e,t){},xJsL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("NYxO");var o={name:"Login",data:function(){return{loginForm:{username:"will",password:"123456"},passwordType:"password",loading:!1,showDialog:!1,redirect:void 0,display:!0}},mounted:function(){},methods:{showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"},handleLogin:function(){var e=this;this.loading=!0,this.$store.dispatch("LoginByUsername",this.loginForm).then(function(t){console.log("login-handleLogin"),console.log(t),0==t.status&&e.$router.push({path:"/"})}).catch(function(e){console.log("login page error"),console.log(e),console.log(e.response);e.status})}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,"auto-complete":"on","label-position":"left"}},[n("el-form-item",{attrs:{prop:"username"}},[n("span",{staticClass:"svg-container glyphicon glyphicon-user"}),e._v(" "),n("el-input",{attrs:{name:"username",type:"text","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("span",{staticClass:"svg-container glyphicon glyphicon-lock"}),e._v(" "),n("el-input",{attrs:{type:e.passwordType,name:"password","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),n("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},on:{click:e.handleLogin}},[e._v("\n      Login\n    ")])],1)],1)},staticRenderFns:[]},s=n("VU/8")(o,a,!1,null,null,null);t.default=s.exports}},["NHnr"]);
//# sourceMappingURL=app.acc36f3c67dc47517d9d.js.map